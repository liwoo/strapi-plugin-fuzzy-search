"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[6970],{55433:function(F,T,e){e.d(T,{r:function(){return v}});var d=e(32735),y=e(60216),h=e.n(y),M=e(74506),A=e(72850);function R(g,D,f){if(!g||!D)return{display:"none"};const{x:p,y:P}=f;return{transform:`translate(${p}px, ${P}px)`}}function v({renderItem:g}){const{itemType:D,isDragging:f,item:p,initialOffset:P,currentOffset:b,mouseOffset:U}=(0,M.useDragLayer)(I=>({item:I.getItem(),itemType:I.getItemType(),initialOffset:I.getInitialSourceClientOffset(),currentOffset:I.getSourceClientOffset(),isDragging:I.isDragging(),mouseOffset:I.getClientOffset()}));return f?d.createElement(A.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},d.createElement(A.x,{style:R(P,b,U)},g({type:D,item:p}))):null}v.propTypes={renderItem:h().func.isRequired}},73386:function(F,T,e){var d=e(32735);const y=(0,d.createContext)();var h=null},56327:function(F,T,e){e.d(T,{PL:function(){return A},Y9:function(){return o.Y},zE:function(){return X},Ky:function(){return le},fi:function(){return Y},zH:function(){return u},r5:function(){return fe}});var d=e(32735),y=e(15062),h=e(70031),A=()=>{const r=(0,y.v9)(h.Z),t=(0,d.useCallback)(n=>r?.components?.[n]??{},[r]);return{...r,getComponentLayout:t}},R=e(84306),v=e(69262),g=e(99381),D=e.n(g),f=e(33795),p=e.n(f),P=e(3040),b=e.n(P),U=e(51375);const I=(r,t)=>t.find(n=>n.uid===r),j=(r,t)=>{const n=K(r,t),a=V(n.contentType,t),l=J(n.contentType,n.components);return b()(n,["contentType","layouts","edit"],a),b()(n,["contentType","layouts","list"],l),Object.keys(n.components).forEach(i=>{const E=V(n.components[i],t);b()(n,["components",i,"layouts","edit"],E)}),n},K=(r,t)=>{const n=(0,U.w8)(D()(r),t,"contentType"),{components:a,contentType:l}=n,i=E=>Object.keys(E.metadatas).reduce((L,k)=>{const S=p()(E,["attributes",k],{});let W=E.metadatas[k];if(S.type==="relation"){const me=I(S.targetModel,t),N=W.edit.mainField,$={name:N,schema:p()(me,["attributes",N])};W={list:{...W.list,mainField:$},edit:{...W.edit,mainField:$}}}return L[k]=W,L},{});return b()(n,["contentType","metadatas"],i(l)),Object.keys(a).forEach(E=>{const L=a[E],k=i(L);b()(n,["components",E,"metadatas"],k)}),n},V=(r,t)=>r.layouts.edit.reduce((n,a)=>{const l=a.map(i=>{const E=p()(r,["attributes",i.name],{}),L={...i,fieldSchema:E,metadatas:p()(r,["metadatas",i.name,"edit"],{})};if(E.type==="relation"){const S=I(E.targetModel,t).pluginOptions||{};b()(L,"targetModelPluginOptions",S),b()(L,"queryInfos",{shouldDisplayRelationLink:ne(r,i.name,t)})}return L});return n.push(l),n},[]),J=(r,t)=>r.layouts.list.reduce((a,l)=>{const i=p()(r,["attributes",l],{}),E=p()(r,["metadatas",l,"list"],{}),L=i.type;if(L==="relation")return a.push({key:`__${l}_key__`,name:l,fieldSchema:i,metadatas:E}),a;if(L==="component"){const k=t[i.component],S=k.settings.mainField,W=k.attributes[S];return a.push({key:`__${l}_key__`,name:l,fieldSchema:i,metadatas:{...E,mainField:{...W,name:S}}}),a}return a.push({key:`__${l}_key__`,name:l,fieldSchema:i,metadatas:E}),a},[]),ne=(r,t,n)=>{const a=p()(r,["attributes",t,"targetModel"],"");return _(n).includes(a)},_=r=>r.filter(t=>t.isDisplayed).map(({uid:t})=>t);var Q=j,z=e(97889);const x={error:null,isLoading:!0,layout:{},layouts:{}};var G=(r,t)=>(0,z.ZP)(r,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const a=t.data.contentType.uid;n.layout=t.data,n.layouts[a]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=r.layouts[t.uid];break}case"UPDATE_LAYOUT":{const a=r.layout;n.layout={...a,contentType:{uid:a.contentType.uid,...t.newLayout.contentType}},n.layouts[a.contentType.uid]={...a,contentType:{uid:a.contentType.uid,...t.newLayout.contentType}};break}default:return n}}),B=e(42882),X=r=>{const[{error:t,isLoading:n,layout:a,layouts:l},i]=(0,d.useReducer)(G,x),E=(0,d.useMemo)(B.Vo,[]),{schemas:L}=(0,y.v9)(N=>E(N),y.wU),k=(0,d.useRef)(!0),{get:S}=(0,v.kY)(),W=(0,d.useCallback)(async(N,$)=>{if(l[N]){i({type:"SET_LAYOUT_FROM_STATE",uid:N});return}i({type:"GET_DATA"});try{const{data:{data:te}}=await S(`/content-manager/content-types/${N}/configuration`,{cancelToken:$.token});i({type:"GET_DATA_SUCCEEDED",data:Q(te,L)})}catch(te){if(R.default.isCancel(te))return;k.current&&console.error(te),k.current&&i({type:"GET_DATA_ERROR",error:te})}},[l,L,S]);(0,d.useEffect)(()=>()=>{k.current=!1},[]),(0,d.useEffect)(()=>{const $=R.default.CancelToken.source();return W(r,$),()=>{$.cancel("Operation canceled by the user.")}},[r,W]);const me=(0,d.useCallback)(N=>{i({type:"UPDATE_LAYOUT",newLayout:Q(N,L)})},[L]);return{error:t,isLoading:n,layout:a,updateLayout:me}},H=r=>r["content-manager_app"].collectionTypeLinks,Z=e(33348),se=e(85973),ye=e.n(se);const oe=(r,t)=>Object.keys(r).reduce((n,a)=>{const l=r[a],i=p()(t,[a],l);return ye()(l)?{...n,[a]:oe(l,i)}:(n[a]=i,n)},{});var ge=(r,t,n)=>{const a=r.find(({to:W})=>W.includes(t));if(!a)return"/";const{to:l,search:i}=a,E=(0,Z.parse)(i),L=(0,Z.parse)(n.substring(1)),k=oe(E,L);return`${l}?${(0,Z.stringify)(k,{encode:!1})}`},le=r=>{const[{rawQuery:t}]=(0,v.Kx)(),n=(0,y.v9)(H);return ge(n,r,t)},ce=e(53038),Y=()=>{const{search:r}=(0,ce.TH)(),t=r?(0,Z.parse)(r.substring(1)):{};return t.plugins?(0,Z.stringify)({plugins:t.plugins},{encode:!1}):""},ae=e(89334);const w=(r,t,n)=>({type:ae.m,permissions:r,__meta__:{plugins:t,containerName:n}}),C=()=>({type:ae.Q}),ee=r=>r["content-manager_rbacManager"].permissions,de=r=>r.rbacProvider.collectionTypesRelatedPermissions;var fe=(r,t,n="listView")=>{const a=(0,y.v9)(de),l=(0,y.v9)(ee),i=(0,y.I0)(),E=a[t];return(0,d.useEffect)(()=>E?(i(w(E,r?r.plugins:null,n)),()=>{i(C())}):()=>{},[E,i,r,n]),l},Te=e(73386);const s=()=>useContext(WysiwygContext);var c=null;const u=r=>{const t=(0,d.useRef)();return(0,d.useEffect)(()=>{t.current=r},[r]),t.current};var o=e(90553),m=e(18777)},90553:function(F,T,e){e.d(T,{Y:function(){return A}});var d=e(32735),y=e(74506),h=e.n(y),M=e(18777);const A=(R,{type:v="STRAPI_DND",index:g,item:D={},onStart:f,onEnd:p,onGrabItem:P,onDropItem:b,onCancel:U,onMoveItem:I,dropSensitivity:j="regular"})=>{const K=(0,d.useRef)(null),[{handlerId:V},J]=(0,y.useDrop)({accept:v,collect(x){return{handlerId:x.getHandlerId()}},hover(x,re){if(!K.current)return;const G=x.index,B=g;if(G!==B){if(j==="regular"){const q=K.current.getBoundingClientRect(),X=(q.bottom-q.top)/2,H=re.getClientOffset().y-q.top;if(G<B&&H<X||G>B&&H>X)return}I(B,G),x.index=B}}}),[{isDragging:ne},_,Q]=(0,y.useDrag)({type:v,item(){f&&f();const{width:x}=K.current?.getBoundingClientRect()??{};return{index:g,width:x,...D}},end(){p&&p()},canDrag:R,isDragging:D.id?x=>D.id===x.getItem().id:void 0,collect:x=>({isDragging:x.isDragging()})}),z=(0,M.A)(R,g,{onGrabItem:P,onDropItem:b,onCancel:U,onMoveItem:I});return[{handlerId:V,isDragging:ne,handleKeyDown:z},K,J,_,Q]}},18777:function(F,T,e){e.d(T,{A:function(){return y}});var d=e(32735);const y=(h,M,{onCancel:A,onDropItem:R,onGrabItem:v,onMoveItem:g})=>{const[D,f]=(0,d.useState)(!1),p=I=>{D&&(I==="UP"?g(M-1,M):I==="DOWN"&&g(M+1,M))},P=()=>{D?(R&&R(M),f(!1)):(v&&v(M),f(!0))},b=()=>{D&&(f(!1),A&&A(M))};return I=>{if(h&&!(I.key==="Tab"&&!D))switch(I.preventDefault(),I.key){case" ":case"Enter":P();break;case"Escape":b();break;case"ArrowDown":case"ArrowRight":p("DOWN");break;case"ArrowUp":case"ArrowLeft":p("UP");break;default:}}}},42882:function(F,T,e){e.d(T,{Jg:function(){return g},KQ:function(){return R},Vo:function(){return v},Yg:function(){return h}});var d=e(98178),y=e(34947);const h=()=>f=>f["content-manager_app"]||y.E,M=()=>createSelector(h(),f=>f),A=()=>createSelector(h(),f=>f.models),R=()=>(0,d.P1)(h(),f=>({collectionTypeLinks:f.collectionTypeLinks,singleTypeLinks:f.singleTypeLinks})),v=()=>(0,d.P1)(h(),({components:f,models:p})=>({schemas:[...f,...p]})),g=(0,d.P1)(h(),f=>f.fieldSizes);var D=null},70031:function(F,T){const e=d=>d["content-manager_editViewLayoutManager"].currentLayout;T.Z=e},25708:function(F,T){T.Z={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},47510:function(F,T){const e=d=>`content-manager.${d}`;T.Z=e},51375:function(F,T,e){e.d(T,{_Q:function(){return H.Z},W3:function(){return M},ko:function(){return g},FE:function(){return f},Di:function(){return U},Ex:function(){return Te},du:function(){return V},TA:function(){return _},Ts:function(){return re},Uo:function(){return B},IF:function(){return X},OB:function(){return ue.Z},w8:function(){return oe},kc:function(){return pe}});var d=e(99381),y=e.n(d),M=(s,c,u)=>{if(Array.isArray(s)&&c>=0&&u>=0&&c<=s.length-1&&u<=s.length-1){const o=y()(s),m=o.splice(c,1);return o.splice(u,0,m[0]),o}return s},A=e(59578),R=e.n(A),g=s=>{const c=s.type;return c==="relation"?!R()(s.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(c)&&!!c};const D=(s,c)=>{typeof s=="function"?s(c):s!=null&&(s.current=c)},f=(...s)=>c=>s.forEach(u=>D(u,c));var p=e(33795),P=e.n(p);const b=(s,c)=>Object.keys(s).reduce((u,o)=>{const m=P()(s,[o],{}),{default:r,component:t,type:n,required:a,min:l,repeatable:i}=m;if(r!==void 0&&(u[o]=r),n==="component"){const E=c?.[t]?.attributes??{},L=b(E,c);if(a===!0&&(u[o]=i===!0?[]:L),l&&i===!0&&a){u[o]=[];for(let k=0;k<l;k+=1)u[o].push(L)}}return n==="dynamiczone"&&a===!0&&(u[o]=[]),u},{});var U=b,I=e(9086),j=e.n(I),V=({layouts:s,metadatas:c,...u})=>{const o=s.list.map(t=>t.name?t.name:t),m=Object.keys(c).reduce((t,n)=>{const a=P()(c,[n],{});let l=a.edit;return l.mainField&&(l={...l,mainField:a.edit.mainField.name}),{...t,[n]:{edit:l,list:j()(a.list,["mainField"])}}},{}),r=s.edit.map(t=>t.map(({name:n,size:a})=>({name:n,size:a})));return{...u,layouts:{edit:r,list:o},metadatas:m}};const J=(s,c)=>s.map(u=>({...u,subject:c}));var _=s=>{const c={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(c).reduce((u,o)=>(u[o]=J(c[o],s),u),{})},Q=e(95919),z=e.n(Q),re=s=>s.split(".").filter(c=>z()(parseInt(c,10))),B=s=>{if(s.length===0)return-1;const c=Math.max.apply(Math,s.map(u=>u.__temp_key__??0));return Number.isNaN(c)?-1:c},X=s=>`/content-manager/${s}`,ue=e(47510),H=e(25708),Z=e(3040),se=e.n(Z),oe=(s,c,u)=>{const o=n=>c.find(a=>a.uid===n),m=Object.assign({},s),r=s[u].uid,t=o(r);return se()(m,[u],{...s[u],...t}),Object.keys(s.components).forEach(n=>{const a=o(n);se()(m,["components",n],{...s.components[n],...a})}),m},O=e(69262),pe=(s,c,u)=>{const o=(m,r)=>Object.keys(m).reduce((t,n)=>{const a=(0,O.UN)(r,n),l=P()(m,n),i=(0,O.k2)(r,[n,"component"]),E=(0,O.k2)(r,[n,"repeatable"]);return a==="dynamiczone"?(t[n]=l.map(L=>o(L,u[L.__component])),t):a==="component"?(E?t[n]=l&&l.map(L=>o(L,u[i])):t[n]=l&&o(l,u[i]),t):(a!=="password"&&(t[n]=l),t)},{});return o(s,c)},le=e(51355),ce=e.n(le),Ee=e(86834),Y=e.n(Ee),ae=e(78746),w=e.n(ae),C=e(24346),ee=e(82293);C.kM(C.nK,"defined",function(){return this.test("defined",O.I0.required,s=>s!==void 0)}),C.kM(C.IX,"notEmptyMin",function(s){return this.test("notEmptyMin",O.I0.min,c=>Y()(c)?!0:c.length>=s)}),C.kM(C.Z_,"isInferior",function(s,c){return this.test("isInferior",s,function(u){return!u||Number.isNaN(w()(u))?!0:w()(c)>=w()(u)})}),C.kM(C.Z_,"isSuperior",function(s,c){return this.test("isSuperior",s,function(u){return!u||Number.isNaN(w()(u))?!0:w()(u)>=w()(c)})});const de=s=>P()(s,["attributes"],{}),ie=(s,{components:c},u={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const o=de(s);return C.Ry().shape(Object.keys(o).reduce((m,r)=>{const t=o[r];if(t.type!=="relation"&&t.type!=="component"&&t.type!=="dynamiczone"){const n=fe(t.type,t,u);m[r]=n}if(t.type==="relation"&&(m[r]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(t.relationType)?C.Ry().nullable():C.IX().nullable()),t.type==="component"){const n=ie(c[t.component],{components:c},{...u,isFromComponent:!0});if(t.repeatable===!0){const{min:l,max:i,required:E}=t;let L=C.Vo(k=>{let S=C.IX().of(n);return l?E?S=S.min(l,O.I0.min):E!==!0&&Y()(k)?S=S.nullable():S=S.min(l,O.I0.min):E&&!u.isDraft&&(S=S.min(1,O.I0.required)),i&&(S=S.max(i,O.I0.max)),S});return m[r]=L,m}const a=C.Vo(l=>l!==void 0?t.required===!0&&!u.isDraft?n.defined():n.nullable():t.required===!0?C.Ry().defined():C.Ry().nullable());return m[r]=a,m}if(t.type==="dynamiczone"){let n=C.IX().of(C.Vo(({__component:i})=>ie(c[i],{components:c},{...u,isFromComponent:!0})));const{max:a,min:l}=t;l?t.required?n=n.test("min",O.I0.min,i=>u.isCreatingEntry?i&&i.length>=l:i===void 0?!0:i!==null&&i.length>=l).test("required",O.I0.required,i=>u.isCreatingEntry?i!==null||i!==void 0:i===void 0?!0:i!==null):n=n.notEmptyMin(l):t.required&&!u.isDraft&&(n=n.test("required",O.I0.required,i=>u.isCreatingEntry?i!==null||i!==void 0:i===void 0?!0:i!==null)),a&&(n=n.max(a,O.I0.max)),m[r]=n}return m},{}))},fe=(s,c,u)=>{let o=C.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(s)&&(o=C.Z_()),s==="json"&&(o=C.nK(O.I0.json).test("isJSON",O.I0.json,m=>{if(!m||!m.length)return!0;try{return JSON.parse(m),!0}catch{return!1}}).nullable().test("required",O.I0.required,m=>!(c.required&&(!m||!m.length)))),s==="email"&&(o=o.email(O.I0.email)),["number","integer","float","decimal"].includes(s)&&(o=C.Rx().transform(m=>z()(m)?void 0:m).typeError()),s==="biginteger"&&(o=C.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(s)&&(o=C.hT()),Object.keys(c).forEach(m=>{const r=c[m];if(r||!ce()(r)&&Number.isInteger(Math.floor(r))||r===0)switch(m){case"required":{u.isDraft||(s==="password"&&u.isCreatingEntry&&(o=o.required(O.I0.required)),s!=="password"&&(u.isCreatingEntry?o=o.required(O.I0.required):o=o.test("required",O.I0.required,t=>t===void 0&&!u.isFromComponent?!0:(0,ee.Z)(s)?t===0?!0:!!t:s==="boolean"?t!=null:s==="date"||s==="datetime"?typeof t=="string"?!Y()(t):!Y()(t?.toString()):!Y()(t))));break}case"max":{s==="biginteger"?o=o.isInferior(O.I0.max,r):o=o.max(r,O.I0.max);break}case"maxLength":o=o.max(r,O.I0.maxLength);break;case"min":{s==="biginteger"?o=o.isSuperior(O.I0.min,r):o=o.min(r,O.I0.min);break}case"minLength":{u.isDraft||(o=o.min(r,O.I0.minLength));break}case"regex":o=o.matches(new RegExp(r),{message:O.I0.regex,excludeEmptyString:!c.required});break;case"lowercase":["text","textarea","email","string"].includes(s)&&(o=o.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(s)&&(o=o.strict().uppercase());break;case"positive":(0,ee.Z)(s)&&(o=o.positive());break;case"negative":(0,ee.Z)(s)&&(o=o.negative());break;default:o=o.nullable()}}),o};var Te=ie},82293:function(F,T,e){e.d(T,{Z:function(){return d}});function d(y){return["integer","biginteger","decimal","float","number"].includes(y)}},28315:function(F,T,e){e.d(T,{K:function(){return g}});var d=e(32735),y=e(60216),h=e.n(y),M=e(67582),A=e(87933),R=e(49372),v=e(54504);function g({children:D,...f}){const{color:p}=f.data,{themeColorName:P}=(0,v.k)(p);return d.createElement(M.c.Option,{...f},d.createElement(A.k,{alignItems:"center",gap:2},d.createElement(A.k,{height:2,background:p,borderColor:P==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),d.createElement(R.Z,{textColor:"neutral800",ellipsis:!0},D)))}g.propTypes={children:h().node.isRequired,data:h().shape({color:h().string}).isRequired}},8445:function(F,T,e){e.d(T,{R:function(){return g}});var d=e(32735),y=e(60216),h=e.n(y),M=e(67582),A=e(87933),R=e(49372),v=e(54504);function g({children:D,...f}){const{color:p}=f.data,{themeColorName:P}=p?(0,v.k)(p):{};return d.createElement(M.c.SingleValue,{...f},d.createElement(A.k,{alignItems:"center",gap:2},d.createElement(A.k,{height:2,background:p,borderColor:P==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),d.createElement(R.Z,{textColor:"neutral800",ellipsis:!0},D)))}g.defaultProps={children:null},g.propTypes={children:h().node,data:h().shape({color:h().string}).isRequired}},61937:function(F,T,e){e.d(T,{$k:function(){return v},FT:function(){return D},Nj:function(){return R},Ot:function(){return A},QM:function(){return h},lv:function(){return g},sN:function(){return y},uL:function(){return f},x4:function(){return M}});var d=e(12301);const y="settings_review-workflows",h="Settings/Review_Workflows/SET_WORKFLOWS",M="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",A="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",R="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",v="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",g={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},D=d.W.colors.primary600,f={STAGE:"stage"}},67350:function(F,T,e){e.d(T,{n:function(){return A}});var d=e(20108),y=e(69262),h=e(33348),M=e.n(h);function A(R={}){const{id:v="",...g}=R,D={populate:"stages"},{get:f}=(0,y.kY)(),p=(0,h.stringify)({...D,...g},{encode:!1}),{data:P,isLoading:b,status:U,refetch:I}=(0,d.useQuery)(["review-workflows","workflows",v],async()=>{try{const{data:{data:K}}=await f(`/admin/review-workflows/workflows/${v}${p?`?${p}`:""}`);return K}catch{return null}});let j=[];return v&&P?j=[P]:Array.isArray(P)&&(j=P),{workflows:j,isLoading:b,status:U,refetch:I}}},54504:function(F,T,e){e.d(T,{k:function(){return h},s:function(){return M}});var d=e(12301),y=e(61937);function h(A){if(!A)return null;const v=Object.entries(d.W.colors).filter(([,g])=>g.toUpperCase()===A.toUpperCase()).reduce((g,[D])=>(y.lv?.[D]&&(g=D),g),null);return v?{themeColorName:v,name:y.lv[v]}:null}function M(){return Object.entries(y.lv).map(([A,R])=>({hex:d.W.colors[A].toUpperCase(),name:R}))}}}]);
